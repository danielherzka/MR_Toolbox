function cmap = ecv_cmap(N)

c = templateCmap;
templateN = size(c,1)-1;
idx_in = (0:templateN)./templateN;
idx_out = (0:(N-1))./(N-1);
R = interp1(idx_in, c(:,1), idx_out, 'linear')';
G = interp1(idx_in, c(:,2), idx_out, 'linear')';
B = interp1(idx_in, c(:,3), idx_out, 'linear')';

cmap = [R, G, B];
% 
% if 1
%    
%     figure;
%     plot(idx_in,c(:,1),'r-x', 'markersize', 8);
%     hold on;
%     plot(idx_in,c(:,2),'g-x', 'markersize', 8);
%     plot(idx_in,c(:,3),'b-x', 'markersize', 8);
%     
%     plot(idx_out,R,'r-o', 'markersize', 3);
%     plot(idx_out,G,'g-o', 'markersize', 3);
%     plot(idx_out,B,'b-o', 'markersize', 3);
%     
% 
% end

function c = templateCmap

c = [...
                   0                   0                   0
   0.015686274509804                   0   0.023529411764706
   0.027450980392157                   0   0.043137254901961
   0.043137254901961                   0   0.062745098039216
   0.054901960784314                   0   0.086274509803922
   0.066666666666667                   0   0.105882352941176
   0.078431372549020                   0   0.125490196078431
   0.094117647058824                   0   0.145098039215686
   0.105882352941176                   0   0.164705882352941
   0.117647058823529                   0   0.184313725490196
   0.129411764705882                   0   0.207843137254902
   0.145098039215686                   0   0.227450980392157
   0.156862745098039                   0   0.247058823529412
   0.168627450980392                   0   0.266666666666667
   0.180392156862745                   0   0.286274509803922
   0.192156862745098                   0   0.305882352941176
   0.207843137254902                   0   0.329411764705882
   0.219607843137255                   0   0.349019607843137
   0.231372549019608                   0   0.368627450980392
   0.243137254901961                   0   0.388235294117647
   0.258823529411765                   0   0.407843137254902
   0.270588235294118                   0   0.427450980392157
   0.282352941176471                   0   0.450980392156863
   0.294117647058824                   0   0.470588235294118
   0.309803921568627                   0   0.490196078431373
   0.321568627450980                   0   0.509803921568627
   0.333333333333333                   0   0.529411764705882
   0.345098039215686                   0   0.549019607843137
   0.356862745098039                   0   0.568627450980392
   0.372549019607843                   0   0.588235294117647
   0.384313725490196                   0   0.607843137254902
   0.396078431372549                   0   0.627450980392157
   0.407843137254902                   0   0.647058823529412
   0.423529411764706                   0   0.666666666666667
   0.435294117647059                   0   0.690196078431373
   0.447058823529412                   0   0.709803921568627
   0.458823529411765                   0   0.729411764705882
   0.470588235294118                   0   0.749019607843137
   0.486274509803922                   0   0.768627450980392
   0.498039215686275                   0   0.788235294117647
   0.498039215686275                   0   0.811764705882353
   0.486274509803922                   0   0.831372549019608
   0.474509803921569                   0   0.850980392156863
   0.462745098039216                   0   0.870588235294118
   0.447058823529412                   0   0.890196078431373
   0.435294117647059                   0   0.909803921568627
   0.427450980392157                   0   0.933333333333333
   0.411764705882353                   0   0.952941176470588
   0.400000000000000                   0   0.972549019607843
   0.388235294117647                   0   0.992156862745098
   0.376470588235294                   0   0.996078431372549
   0.360784313725490                   0   0.996078431372549
   0.349019607843137                   0   0.996078431372549
   0.337254901960784                   0   0.996078431372549
   0.325490196078431                   0   0.996078431372549
   0.313725490196078                   0   0.996078431372549
   0.298039215686275                   0   0.996078431372549
   0.286274509803922                   0   0.996078431372549
   0.274509803921569                   0   0.996078431372549
   0.262745098039216                   0   0.996078431372549
   0.247058823529412                   0   0.996078431372549
   0.235294117647059                   0   0.996078431372549
   0.223529411764706                   0   0.996078431372549
   0.211764705882353                   0   0.996078431372549
   0.196078431372549                   0   0.996078431372549
   0.184313725490196                   0   0.996078431372549
   0.172549019607843                   0   0.996078431372549
   0.160784313725490                   0   0.996078431372549
   0.149019607843137                   0   0.996078431372549
   0.133333333333333                   0   0.996078431372549
   0.121568627450980                   0   0.996078431372549
   0.109803921568627                   0   0.996078431372549
   0.098039215686275                   0   0.996078431372549
   0.082352941176471                   0   0.996078431372549
   0.070588235294118                   0   0.996078431372549
   0.058823529411765                   0   0.996078431372549
   0.047058823529412                   0   0.996078431372549
   0.031372549019608                   0   0.996078431372549
   0.019607843137255   0.003921568627451   0.996078431372549
   0.007843137254902   0.027450980392157   0.996078431372549
   0.003921568627451   0.062745098039216   0.996078431372549
   0.003921568627451   0.094117647058824   0.996078431372549
   0.003921568627451   0.129411764705882   0.996078431372549
   0.003921568627451   0.164705882352941   0.996078431372549
   0.003921568627451   0.200000000000000   0.996078431372549
   0.003921568627451   0.231372549019608   0.996078431372549
   0.003921568627451   0.266666666666667   0.996078431372549
   0.003921568627451   0.301960784313725   0.996078431372549
   0.003921568627451   0.333333333333333   0.996078431372549
   0.003921568627451   0.368627450980392   0.996078431372549
   0.003921568627451   0.403921568627451   0.996078431372549
   0.003921568627451   0.435294117647059   0.996078431372549
   0.003921568627451   0.470588235294118   0.996078431372549
   0.003921568627451   0.505882352941176   0.996078431372549
   0.003921568627451   0.541176470588235   0.996078431372549
   0.003921568627451   0.572549019607843   0.996078431372549
   0.003921568627451   0.607843137254902   0.996078431372549
   0.003921568627451   0.643137254901961   0.996078431372549
   0.003921568627451   0.674509803921569   0.996078431372549
   0.003921568627451   0.709803921568627   0.996078431372549
   0.003921568627451   0.745098039215686   0.996078431372549
   0.003921568627451   0.780392156862745   0.996078431372549
   0.003921568627451   0.811764705882353   0.996078431372549
   0.003921568627451   0.847058823529412   0.996078431372549
   0.003921568627451   0.882352941176471   0.996078431372549
   0.003921568627451   0.917647058823529   0.996078431372549
   0.003921568627451   0.949019607843137   0.996078431372549
   0.003921568627451   0.980392156862745   0.996078431372549
   0.003921568627451   0.996078431372549   0.996078431372549
   0.003921568627451   0.996078431372549   0.929411764705882
   0.003921568627451   0.996078431372549   0.819607843137255
   0.003921568627451   0.996078431372549   0.709803921568627
   0.003921568627451   0.996078431372549   0.600000000000000
   0.003921568627451   0.996078431372549   0.490196078431373
   0.003921568627451   0.996078431372549   0.380392156862745
   0.003921568627451   0.996078431372549   0.270588235294118
   0.003921568627451   0.996078431372549   0.160784313725490
   0.003921568627451   0.996078431372549   0.050980392156863
   0.003921568627451   0.996078431372549   0.003921568627451
   0.031372549019608   0.996078431372549   0.003921568627451
   0.086274509803922   0.996078431372549   0.003921568627451
   0.137254901960784   0.996078431372549   0.003921568627451
   0.188235294117647   0.996078431372549   0.003921568627451
   0.243137254901961   0.996078431372549   0.003921568627451
   0.294117647058824   0.996078431372549   0.003921568627451
   0.345098039215686   0.996078431372549   0.003921568627451
   0.400000000000000   0.996078431372549   0.003921568627451
   0.450980392156863   0.996078431372549   0.003921568627451
   0.501960784313725   0.996078431372549   0.003921568627451
   0.552941176470588   0.988235294117647   0.003921568627451
   0.603921568627451   0.976470588235294   0.003921568627451
   0.658823529411765   0.960784313725490   0.003921568627451
   0.709803921568627   0.949019607843137   0.003921568627451
   0.760784313725490   0.937254901960784   0.003921568627451
   0.815686274509804   0.921568627450980   0.003921568627451
   0.866666666666667   0.909803921568627   0.003921568627451
   0.917647058823529   0.898039215686275   0.003921568627451
   0.968627450980392   0.886274509803922   0.003921568627451
   0.996078431372549   0.874509803921569   0.003921568627451
   0.996078431372549   0.858823529411765   0.003921568627451
   0.996078431372549   0.847058823529412   0.003921568627451
   0.996078431372549   0.835294117647059   0.003921568627451
   0.996078431372549   0.819607843137255   0.003921568627451
   0.996078431372549   0.807843137254902   0.003921568627451
   0.996078431372549   0.796078431372549   0.003921568627451
   0.996078431372549   0.780392156862745   0.003921568627451
   0.996078431372549   0.768627450980392   0.003921568627451
   0.996078431372549   0.756862745098039   0.003921568627451
   0.996078431372549   0.741176470588235   0.003921568627451
   0.996078431372549   0.729411764705882   0.003921568627451
   0.996078431372549   0.717647058823529   0.003921568627451
   0.996078431372549   0.701960784313725   0.003921568627451
   0.996078431372549   0.690196078431373   0.003921568627451
   0.996078431372549   0.678431372549020   0.003921568627451
   0.996078431372549   0.662745098039216   0.003921568627451
   0.996078431372549   0.650980392156863   0.003921568627451
   0.996078431372549   0.639215686274510   0.003921568627451
   0.996078431372549   0.623529411764706   0.003921568627451
   0.996078431372549   0.611764705882353   0.003921568627451
   0.996078431372549   0.600000000000000   0.003921568627451
   0.996078431372549   0.584313725490196   0.003921568627451
   0.996078431372549   0.572549019607843   0.003921568627451
   0.996078431372549   0.560784313725490   0.003921568627451
   0.996078431372549   0.545098039215686   0.003921568627451
   0.996078431372549   0.533333333333333   0.003921568627451
   0.996078431372549   0.521568627450980   0.003921568627451
   0.996078431372549   0.509803921568627   0.003921568627451
   0.996078431372549   0.494117647058824   0.003921568627451
   0.996078431372549   0.482352941176471   0.003921568627451
   0.996078431372549   0.470588235294118   0.003921568627451
   0.996078431372549   0.454901960784314   0.003921568627451
   0.996078431372549   0.443137254901961   0.003921568627451
   0.996078431372549   0.431372549019608   0.003921568627451
   0.996078431372549   0.419607843137255   0.003921568627451
   0.996078431372549   0.403921568627451   0.003921568627451
   0.996078431372549   0.392156862745098   0.003921568627451
   0.996078431372549   0.380392156862745   0.003921568627451
   0.996078431372549   0.364705882352941   0.003921568627451
   0.996078431372549   0.352941176470588   0.003921568627451
   0.996078431372549   0.341176470588235   0.003921568627451
   0.996078431372549   0.325490196078431   0.003921568627451
   0.996078431372549   0.313725490196078   0.003921568627451
   0.996078431372549   0.301960784313725   0.003921568627451
   0.996078431372549   0.286274509803922   0.003921568627451
   0.996078431372549   0.274509803921569   0.003921568627451
   0.996078431372549   0.262745098039216   0.003921568627451
   0.996078431372549   0.247058823529412   0.003921568627451
   0.996078431372549   0.235294117647059   0.003921568627451
   0.996078431372549   0.223529411764706   0.003921568627451
   0.996078431372549   0.207843137254902   0.003921568627451
   0.996078431372549   0.196078431372549   0.003921568627451
   0.996078431372549   0.184313725490196   0.003921568627451
   0.996078431372549   0.172549019607843   0.003921568627451
   0.996078431372549   0.168627450980392   0.003921568627451
   0.996078431372549   0.156862745098039   0.003921568627451
   0.996078431372549   0.145098039215686   0.003921568627451
   0.996078431372549   0.133333333333333   0.003921568627451
   0.996078431372549   0.125490196078431   0.003921568627451
   0.996078431372549   0.101960784313725   0.003921568627451
   0.996078431372549   0.078431372549020   0.003921568627451
   0.996078431372549   0.066666666666667   0.003921568627451
   0.996078431372549   0.050980392156863   0.003921568627451
   0.996078431372549   0.039215686274510   0.003921568627451
   0.996078431372549   0.027450980392157   0.003921568627451
   0.996078431372549   0.011764705882353   0.003921568627451
   0.996078431372549   0.003921568627451   0.003921568627451
   0.996078431372549   0.007843137254902   0.007843137254902
   0.996078431372549   0.027450980392157   0.027450980392157
   0.996078431372549   0.047058823529412   0.047058823529412
   0.996078431372549   0.066666666666667   0.066666666666667
   0.996078431372549   0.090196078431373   0.090196078431373
   0.996078431372549   0.109803921568627   0.109803921568627
   0.996078431372549   0.129411764705882   0.129411764705882
   0.996078431372549   0.149019607843137   0.149019607843137
   0.996078431372549   0.168627450980392   0.168627450980392
   0.996078431372549   0.188235294117647   0.188235294117647
   0.996078431372549   0.211764705882353   0.211764705882353
   0.996078431372549   0.231372549019608   0.231372549019608
   0.996078431372549   0.250980392156863   0.250980392156863
   0.996078431372549   0.270588235294118   0.270588235294118
   0.996078431372549   0.290196078431373   0.290196078431373
   0.996078431372549   0.309803921568627   0.309803921568627
   0.996078431372549   0.333333333333333   0.333333333333333
   0.996078431372549   0.352941176470588   0.352941176470588
   0.996078431372549   0.372549019607843   0.372549019607843
   0.996078431372549   0.392156862745098   0.392156862745098
   0.996078431372549   0.411764705882353   0.411764705882353
   0.996078431372549   0.431372549019608   0.431372549019608
   0.996078431372549   0.454901960784314   0.454901960784314
   0.996078431372549   0.474509803921569   0.474509803921569
   0.996078431372549   0.494117647058824   0.494117647058824
   0.996078431372549   0.513725490196078   0.513725490196078
   0.996078431372549   0.533333333333333   0.533333333333333
   0.996078431372549   0.552941176470588   0.552941176470588
   0.996078431372549   0.576470588235294   0.576470588235294
   0.996078431372549   0.596078431372549   0.596078431372549
   0.996078431372549   0.615686274509804   0.615686274509804
   0.996078431372549   0.635294117647059   0.635294117647059
   0.996078431372549   0.654901960784314   0.654901960784314
   0.996078431372549   0.674509803921569   0.674509803921569
   0.996078431372549   0.698039215686274   0.698039215686274
   0.996078431372549   0.717647058823529   0.717647058823529
   0.996078431372549   0.737254901960784   0.737254901960784
   0.996078431372549   0.756862745098039   0.756862745098039
   0.996078431372549   0.776470588235294   0.776470588235294
   0.996078431372549   0.796078431372549   0.796078431372549
   0.996078431372549   0.835294117647059   0.835294117647059
   0.996078431372549   0.854901960784314   0.854901960784314
   0.996078431372549   0.874509803921569   0.874509803921569
   0.996078431372549   0.894117647058824   0.894117647058824
   0.996078431372549   0.917647058823529   0.917647058823529
   0.996078431372549   0.937254901960784   0.937254901960784
   0.996078431372549   0.956862745098039   0.956862745098039
   0.996078431372549   0.976470588235294   0.976470588235294
   0.996078431372549   0.996078431372549   0.996078431372549
   0.996078431372549   0.996078431372549   0.996078431372549
   ];